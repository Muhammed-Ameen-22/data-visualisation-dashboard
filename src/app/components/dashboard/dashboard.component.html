<div class="dashboard-container">
  <app-sidebar (collapseChanged)="onCollapseChanged($event)"></app-sidebar>
  <div class="main-content" [class.collapsed]="!isSidebarCollapsed" [class.sidebar-open-mobile]="!isSidebarCollapsed">
    <app-navbar></app-navbar>
    <div class="top-filter">
      <label for="sectionFilter">Filter:</label>
      <select id="sectionFilter" [ngModel]="(selectedSection$ | async)" (ngModelChange)="onSectionChange($event)">
        <option value="all">All</option>
        <option value="sales">Sales Data</option>
        <option value="engagement">User Engagement</option>
        <option value="performance">Performance Stats</option>
      </select>

      <div class="chart-customization">
        <label>Color Scheme : </label>
        <select [ngModel]="(selectedColorScheme | async)" (ngModelChange)="onColorSchemeChange($event)">
          <option [ngValue]="['#ed64a6', '#4c51bf']">Pink / Indigo</option>
          <option [ngValue]="['#34d399', '#3b82f6']">Green / Blue</option>
          <option [ngValue]="['#f87171', '#fbbf24']">Red / Yellow</option>
        </select>
      
        <!-- <div>
          <label><input type="checkbox" [(ngModel)]="showXAxis" /> Show X-Axis</label>
          <label><input type="checkbox" [(ngModel)]="showYAxis" /> Show Y-Axis</label>
        </div> -->
      </div>
    </div>

    <div class="content-area">
      <div *ngIf="(selectedSection$ | async) === 'all' || (selectedSection$ | async) === 'sales'" class="chart-section">
        <div class="chart-header">
          <h3>Sales Data (In Millions)</h3>
          <select [ngModel]="(salesChartType$ | async)" (ngModelChange)="onSalesChartChange($event)">
            <option value="line">Line Chart</option>
            <option value="bar">Bar Chart</option>
            <option value="pie">Pie Chart</option>
          </select>
        </div>
        <ng-container [ngSwitch]="salesChartType$ | async">
          <app-line-chart *ngSwitchCase="'line'" [type]="'sales'"
            [colorScheme]="(selectedColorScheme | async) || ['#ed64a6', '#4c51bf']"
          ></app-line-chart>
          <app-bar-chart *ngSwitchCase="'bar'" [type]="'sales'"
            [colorScheme]="(selectedColorScheme | async) || ['#ed64a6', '#4c51bf']"
          ></app-bar-chart>
          <app-pie-chart *ngSwitchCase="'pie'" [type]="'sales'"></app-pie-chart>
        </ng-container>
      </div>

      <div *ngIf="(selectedSection$ | async) === 'all' || (selectedSection$ | async) === 'engagement'" class="chart-section">
        <div class="chart-header">
          <h3>Monthly Active Users</h3>
          <select [ngModel]="(engagementChartType$ | async)" (ngModelChange)="onEngagementChartChange($event)">
            <option value="line">Line Chart</option>
            <option value="bar">Bar Chart</option>
            <option value="pie">Pie Chart</option>
          </select>
        </div>
        <ng-container [ngSwitch]="engagementChartType$ | async">
          <app-line-chart *ngSwitchCase="'line'" [type]="'engagement'"></app-line-chart>
          <app-bar-chart *ngSwitchCase="'bar'" [type]="'engagement'"></app-bar-chart>
          <app-pie-chart *ngSwitchCase="'pie'" [type]="'engagement'"></app-pie-chart>
        </ng-container>
      </div>

      <div *ngIf="(selectedSection$ | async) === 'all' || (selectedSection$ | async) === 'performance'" class="chart-section">
        <div class="chart-header">
          <h3> Customer Satisfaction Index</h3>
          <select [ngModel]="(performanceChartType$ | async)" (ngModelChange)="onPerformanceChartChange($event)">
            <option value="line">Line Chart</option>
            <option value="bar">Bar Chart</option>
            <option value="pie">Pie Chart</option>
          </select>
        </div>
        <ng-container [ngSwitch]="performanceChartType$ | async">
          <app-line-chart *ngSwitchCase="'line'" [type]="'performance'"></app-line-chart>
          <app-bar-chart *ngSwitchCase="'bar'" [type]="'performance'"></app-bar-chart>
          <app-pie-chart *ngSwitchCase="'pie'" [type]="'performance'"></app-pie-chart>
        </ng-container>
      </div>
    </div>
  </div>
</div>